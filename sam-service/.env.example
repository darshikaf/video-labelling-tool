# SAM 2 Service Configuration
# Copy this file to .env and adjust values as needed

# Model Configuration
# Options: tiny, small, base_plus, large
# Recommendation: Use 'tiny' for development, 'base_plus' or 'large' for production
SAM2_MODEL_SIZE=tiny

# Device Configuration
# Options: auto, cpu, cuda
# 'auto' will use GPU if available, otherwise CPU
# Use 'cpu' for development to avoid GPU memory issues
SAM2_DEVICE=cpu

# Model Directory
# Location where model checkpoints are stored
MODEL_DIR=/app/models

# Session Management
# Session timeout in seconds (default: 300 = 5 minutes)
SESSION_TIMEOUT=300

# Maximum number of concurrent video annotation sessions
# Each session consumes significant memory (2-4GB)
# Recommendation: 2 for 16GB RAM systems, 1 for 8GB RAM systems
MAX_CONCURRENT_SESSIONS=2

# Video Limits
# Maximum number of frames to load from a video
# 300 frames ≈ 10 seconds at 30fps
# Each frame uses ~6MB RAM for 1080p video
# Total memory per session ≈ MAX_VIDEO_FRAMES × 6MB
MAX_VIDEO_FRAMES=300

# Maximum video dimension (width or height)
# Prevents loading extremely high-resolution videos
# 1920 = Full HD (1080p), 3840 = 4K
MAX_FRAME_DIMENSION=1920

# Redis Configuration (for caching and background tasks)
REDIS_URL=redis://redis:6379/1

# Server Configuration
UVICORN_HOST=0.0.0.0
UVICORN_PORT=8002

# -------------------------------------------------------------------
# Configuration Recommendations by System Specs
# -------------------------------------------------------------------

# For 8GB RAM System (Development):
# SAM2_MODEL_SIZE=tiny
# SAM2_DEVICE=cpu
# MAX_CONCURRENT_SESSIONS=1
# MAX_VIDEO_FRAMES=150
# SESSION_TIMEOUT=180

# For 16GB RAM System (Development/Testing):
# SAM2_MODEL_SIZE=small
# SAM2_DEVICE=cpu
# MAX_CONCURRENT_SESSIONS=2
# MAX_VIDEO_FRAMES=300
# SESSION_TIMEOUT=300

# For 32GB RAM + GPU System (Production):
# SAM2_MODEL_SIZE=base_plus
# SAM2_DEVICE=auto
# MAX_CONCURRENT_SESSIONS=3
# MAX_VIDEO_FRAMES=600
# SESSION_TIMEOUT=600

# For High-End GPU System (Production):
# SAM2_MODEL_SIZE=large
# SAM2_DEVICE=cuda
# MAX_CONCURRENT_SESSIONS=5
# MAX_VIDEO_FRAMES=900
# SESSION_TIMEOUT=900

# -------------------------------------------------------------------
# Model Size Comparison
# -------------------------------------------------------------------
# Model     | Size  | Speed      | Accuracy | GPU Memory | Recommended For
# --------- | ----- | ---------- | -------- | ---------- | ---------------
# tiny      | 38MB  | Very Fast  | Good     | ~1GB       | Development, Testing
# small     | 181MB | Fast       | Better   | ~2GB       | Light Production
# base_plus | 375MB | Medium     | Great    | ~4GB       | Production
# large     | 814MB | Slow       | Best     | ~8GB       | High Accuracy Needs
